    <!DOCTYPE html>
    <head>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <!--       
            <link rel="stylesheet" href="chrome.css"> -->
            <style>
                h1,h6 {
                    text-align: center;
                    font-family:'Times New Roman', Times, serif
                    /* margin-left: 30px; */
                }
                * {
                    box-sizing: border-box;
                }
                .child {
                    padding-left: 10px;

                }
                .parent {
                    display: flex;
                }
                #txtInput {
                    word-wrap:break-word;
                    font-family: monospace
                }
                #txtOutput {
                    text-align: center;
                    font-family: "Comic Sans MS", cursive, sans-serif;
                }

            
            </style>
        </head> 

    <script type="text/javascript">

    // https://drive.google.com/uc?export=download&id=

        // function breakDiamondAtEnter() {
        //     var txtInput, result;
        //     txtInput = document.getElementById("txtInput").value;
        //     txtOutput = document.getElementById("txtOutput").value;
        //     result = []
        //     let split1= txtInput.split("\n");
        //     txtOutput = split1[1]

        // }
        
        function breakDiamondAtEnterShort() {
            var txtInput1 = document.getElementById("txtInput").value
            var txtInput = txtInput1.replace(/\n\n?/g, "\n")
            let split1= txtInput.split("\n");
            var result = [];
            for (sent of split1) {
                if (sent.split(" ").length <= 6) {
                    result.push(breakDiamondAt5(sent))
                } else {
                    result.push(breakDiamondMoreThan5Short(sent))
                }
            }
            document.getElementById("txtOutput").value=result.join("\n\n\n");
        }

        function breakDiamondAtEnterTall() {
            var txtInput1 = document.getElementById("txtInput").value
            var txtInput = txtInput1.replace(/\n\n?/g, "\n")
            let split1= txtInput.split("\n");
            var result = [];
            for (sent of split1) {
                if (sent.split(" ").length <= 6) {
                    result.push(breakDiamondAt5(sent))
                } else {
                    result.push(breakDiamondMoreThan5Tall(sent))
                }
            }
            document.getElementById("txtOutput").value=result.join("\n\n\n");
        }

        function breakDiamondAt5(str) {
            let word =str.split(" ");
            let n=Math.round(Math.sqrt(word.length));
            return word.reduce((a, e, j)=> a + e + (j%n === 0 ? '\n' : ' '), '');
        }

    function breakDiamondMoreThan5Short(str) {
            var rows = Math.ceil(Math.sqrt(str.split(" ").length))
            var len = Math.floor(str.length/rows)
            var re = RegExp("(?:\\s|^)(.{1," + len + "})(?=\\s|$)", "g");
            var res = [];
            var finalResult = [];
            while ((m = re.exec(str)) !== null) {
                res.push(m[1]);
            }
            for (var i = 0; i < res.length - 1; i++){    
                if(res[i].indexOf(' ') != -1){  
                while(res[i].length < len){      
                    for(var j=0; j < res[i].length-1; j++){
                    if(res[i][j] == ' '){
                        res[i] = res[i].substring(0, j) + " " + res[i].substring(j);
                        if(res[i].length == len) break;
                        while(res[i][j] == ' ') j++;
                    }
                    }
                }      
                }    
                finalResult.push(res[i]);    
            }
            finalResult.push(res[res.length - 1]);
            return finalResult.join('\n').replace(/\s\s+/g, " ")
        }
        

        function breakDiamondMoreThan5Tall(str) {
            var rows = Math.ceil(Math.sqrt(str.split(" ").length))+1
            var len = Math.floor(str.length/rows)-3
            var re = RegExp("(?:\\s|^)(.{1," + len + "})(?=\\s|$)", "g");
            var res = [];
            var finalResult = [];
            while ((m = re.exec(str)) !== null) {
                res.push(m[1]);
            }
            for (var i = 0; i < res.length - 1; i++){    
                if(res[i].indexOf(' ') != -1){  
                while(res[i].length < len){      
                    for(var j=0; j < res[i].length-1; j++){
                    if(res[i][j] == ' '){
                        res[i] = res[i].substring(0, j) + " " + res[i].substring(j);
                        if(res[i].length == len) break;
                        while(res[i][j] == ' ') j++;
                    }
                    }
                }      
                }    
                finalResult.push(res[i]);    
            }
            finalResult.push(res[res.length - 1]);
            return finalResult.join('\n').replace(/\s\s+/g, " ")
        }

        function keepDialogOnly() {
            var txtInputKeepDialog = document.getElementById("txtInput").value;
            var regexKeepDialog = /^\t\S.*/gm
            const a = txtInputKeepDialog
                .match(regexKeepDialog)
                .flatMap((s) => s.split(/\t/))
                .filter(Boolean);
            var resultDialog = a.join("\n");
            document.getElementById("txtOutput").value=resultDialog;
            var txtInputBreakLine, result;
            txtInputBreakLine = document.getElementById("txtOutput").value;
            resultH = txtInputBreakLine.replace(/\-\-\s/g, "--\n");
            resultG = resultH.replace(/\u2026|\.{3}/g, "...\n");
            resultF = resultG.replace(/\!\s/g, "!\n");
            resultE = resultF.replace(/\)\s/g, ")\n");
            resultD = resultE.replace(/\,\s/g, ",\n");
            resultC = resultD.replace(/\:/g, ":\n");
            resultB = resultC.replace(/\.\s/g, ".\n");
            resultA = resultB.replace(/\?\s/g, "?\n");
            result1 = resultA.replace(/\n/g, "\n\n\n");
            let split1= result1.split("\n\n\n");
            var split2= [];
            var result = [];
            for (var i=0; i<split1.length; i++) {
                let l =split1[i].split(" ").length;
                let n=Math.floor(Math.sqrt(l));
                split2 += split1[i].split(" ").reduce((a, e, j)=> a + e + (j%n === 0 ? '\n' : ' '), '')+"\n\n\n";
            }
            result = split2; 
            document.getElementById("txtOutput").value=result;
        }

        function sketchScript() {
            var txtInputBreakLine, result;
            //  txtInputBreakLine = document.getElementById("txtInput").value;
            txtInputBreakLine = document.getElementById("txtInput").value;
            // function replace /n with /n/n
            resultH = txtInputBreakLine.replace(/\-\-\s/g, "--\n");
            resultG = resultH.replace(/\u2026|\.{3}/g, "...\n");
            resultF = resultG.replace(/\!\s/g, "!\n");
            resultE = resultF.replace(/\)\s/g, ")\n");
            resultD = resultE.replace(/\,\s/g, ",\n");
            resultC = resultD.replace(/\:/g, ":\n");
            resultB = resultC.replace(/\.\s/g, ".\n");
            resultA = resultB.replace(/\?\s/g, "?\n");
            result1 = resultA.replace(/\n/g, "\n\n\n");
            let split1= result1.split("\n\n\n");
            var split2= [];
            var result = [];
            for (var i=0; i<split1.length; i++) {
                let l =split1[i].split(" ").length;
                let n=Math.floor(Math.sqrt(l));
                split2 += split1[i].split(" ").reduce((a, e, j)=> a + e + (j%n === 0 ? '\n' : ' '), '')+"\n\n";
            }
            result = split2; 
            document.getElementById("txtOutput").value=result;
            // // //split lines better fit to ballon
            // var n=Math.floor(Math.sqrt(result1.split(" ").length));
            // var result = result1.split(" ").reduce(
            //         (a, e, i)=> a + e + (i%n === 1 ? '\n' : ' '), '');
            // //  //add Enter after two word or two space
            // //  result = result1.replace(/(\S+\s*){1,2}/g, "$&\n");
            //  document.getElementById("txtOutput").value=result;
        }

        async function checkBox() {
            var rd1 = document.getElementById("rd1");
            var rd2 = document.getElementById("rd2");
            var rd3 = document.getElementById("rd3");
            var rd4 = document.getElementById("rd4")
            var rd5 = document.getElementById("rd5")
            if (rd1.checked == true && rd4.checked == true) {
                breakDiamondAtEnterShort();
            } else if (rd1.checked == true && rd5.checked == true) {
                breakDiamondAtEnterLong();
            } else if(rd2.checked == true) {
                keepDialogOnly();
            } else if (rd3.checked == true) { 
                sketchScript();
            } else {
                return false;
            }
        }

        async function paste(input) {
            var textarea2 = document.getElementById("txtInput");
            textarea2.select()
            const text = await navigator.clipboard.readText();
            textarea2.value = text;
            checkBox();
            }

        function copyInput() {
            var textarea = document.getElementById('txtInput');
            textarea.select();
            document.execCommand("copy");
            alert("It's copy to your clipboard!")
        }

        function copyOutput() {
            var textarea = document.getElementById("txtOutput");
            textarea.select();
            document.execCommand("copy");
            alert("It's copy to your clipboard!")
        }
        
    </script>
    </head>

    <body>

        
        <h1>
            
            <img src='https://drive.google.com/uc?export=download&id=1ee2zPl3heR8SoPyZNJU3jdqApcYN5xPY'width="50" height="60">
            <b>Diamond Text-Break Comic Dialog</b>
        </h1>
        <h6>Find me @ Youtube, Reddit:   mangadrawing.123</h6>

        <p> <span id="count">0</span> views <p>

            <script>
                var countEl=document.getElementById("count");

                updateVisitCount();

                function updateVisitCount() {
                fetch('https://api.countapi.xyz/update/alex/webpage/?amount=1')
                    .then(res => res.json())
                    .then(data => {countEl.innerHTML = data.value;});
                }
            </script>

        <div class="parent">
            <div class="child">
                Insert Text:
                <input type="button" value="Paste Text" id="enterButton" onClick="paste()"><br>
                <textarea  name="text input" id="txtInput" cols="50" rows="30"></textarea><br>
                <input type="button" id="copyInput" value="Copy Input Above for Google Docs Saving and Check and spelling" id="copyInput" onClick="copyInput()"><br>

            </div>
            <div class="child">
                <br><br><br>
                <input type="button" value="Enter" id="enterButton" onClick="checkBox()"><br><br>
                
                <label class="radio-inline">
                    <input type="radio" id="rd4" name="optradio" checked onClick="breakDiamondAtEnterShort()">
                    <img src="https://drive.google.com/uc?export=download&id=1_Ik3y06kNRJI7BzF4nGGf-ot6-zbX2Ke" width="50" height="30">
                </label>
                <label class="radio-inline">
                    <input type="radio" id="rd5" name="optradio" onClick="breakDiamondAtEnterTall()">
                    <img src="https://drive.google.com/uc?export=download&id=1Mna1dTMaahZrLIHNu-R2SrXrjx7vd2_8" width="30" height="50">
                </label><br><br>
                
                 <label for="html">
                    <input type="radio" id="rd1" name="fav_language" value="HTML" checked onClick="keepDialogOnly()">
                    Dialog
                </label><br><br>
                 <input type="radio" id="rd2" name="fav_language" value="HTML" onClick="keepDialogOnly()">
                 <label for="html">Dialog in (Action, Character, Dialog)</label><br><br>
                <input type="radio" id="rd3" name="fav_language" value="HTML" onClick="sketchScript()">
                 <label for="html">ENTIRE script</label><br><br>
            </div>
            <div class="child">
                Output text:
                <input type="button" value="Copy Output" id="copyButton" onClick="copyOutput()"><br>
                <textarea name="text output" id="txtOutput" cols="50" rows="30"></textarea>
            </div>

        </div>

        
    </body>
    </head>
    </html>


